<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v-on="http://www.w3.org/1999/xhtml"
	xmlns:v-bind="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta http-equiv="content-type" content="no-cache, must-revalidate" />
	<meta http-equiv="expires" content="Wed, 26 Feb 1997 08:21:57 GMT" />
	<title>お問い合わせ</title>

	<link href="../css/bootstrap.css" rel="stylesheet" />
	<link href="../css/font-awesome.css" rel="stylesheet" />
	<link href="../css/custom-styles.css" rel="stylesheet" />
	<link href="../css/element/index.css" rel="stylesheet" />

	<style>
		[v-cloak] {
			display: none;
		}

		.table th,
		.table td {
			text-align: center !important;
			vertical-align: middle !important;
		}
	</style>
</head>

<body>
	<div id="wrapper" v-cloak>
		<div class="row">
			<div class="col-md-12" style="height:60px;">
				<nav class="navbar navbar-default top-navbar" role="navigation">
					<div class="row">
						<div class="col-md-2">
							<div style="display: inline-block; vertical-align: middle;">
								<img src="../img/logo_white.jpg" width="40%" height="40%"
									style="vertical-align: middle;">
								<a class="navbar-brand" style="background-color: darkslateblue"><strong
										style="font-size: 20px;">Beeeee</strong></a>
							</div>
						</div>
						<div class="col-md-10">

							<ul class="nav navbar-top-links navbar-right">
								<li style="color: white">ようこそ、{{ user.name }}</li>
								<li class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
										<i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
									</a>
									<ul class="dropdown-menu dropdown-user">
										<li><a href="javascript:void(0)" @click="personalPage"><i
													class="fa fa-user fa-fw"></i> 個人情報</a>
										</li>
										<li class="divider"></li>
										<li><a href="javascript:void(0)" @click="logout"><i
													class="fa fa-sign-out fa-fw"></i> ログアウト</a>
										</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</nav>
			</div>
		</div>
		<div class="row">
			<div class="col-md-2">
				<nav id="nav-id" class="navbar-default navbar-side" role="navigation">
					<div class="sidebar-collapse">
						<ul class="nav" id="main-menu">

							<li>
								<a href="#"><i class="fa fa-sitemap"></i> 情報管理<span class="fa arrow"></span></a>
								<ul class="nav nav-second-level collapse in">
									<li v-if="user.level === 1">
										<a href="adminInfo.html"><i class="fa fa-table sub-icon-mg"
												aria-hidden="true"></i><span class="mini-sub-pro">管理者情報</span></a>
									</li>

									<li v-if="user.level === 1">
										<a href="yuuzaInfo.html"><i class="fa fa-table sub-icon-mg"
												aria-hidden="true"></i><span class="mini-sub-pro">ユーザー情報</span></a>
									</li>

									<li>
										<a href="classInfo.html"><i class="fa fa-table sub-icon-mg"
												aria-hidden="true"></i><span class="mini-sub-pro">講座一覧</span></a>
									</li>

									<li>
										<a href="xuankeInfo.html"><i class="fa fa-table sub-icon-mg"
												aria-hidden="true"></i><span class="mini-sub-pro">注文一覧</span></a>
									</li>


									<li>
										<a href="javascript:void(0)" @click="personalPage"><i
												class="fa fa-user"></i>個人情報</a>
									</li>

									<li>
										<a href="inquiry.html"><i class="fa fa-question-circle sub-icon-mg"
												aria-hidden="true"></i><span class="mini-sub-pro">お問い合わせ</span></a>
									</li>

								</ul>
							</li>

							<li>
								<a href="updatePassword.html" class="active-menu"><i class="fa fa-unlock-alt"></i>
									パスワードの変更</a>
							</li>
							<li>
								<a href="javascript:void(0)" @click="logout"><i class="fa fa-power-off"></i> ログアウト</a>
							</li>
						</ul>
					</div>
				</nav>
			</div>
			<div class="col-md-10" style="background-color: #e6e6e6">
				<div id="page-wrapper">
					<div id="page-inner">
						<div class="row">
							<div class="col-md-12">
								<div class="panel panel-default" style="background-color: whitesmoke">
									<div class="panel-heading" style="margin-bottom:10px; background-color: whitesmoke">
										お問い合わせ</div>
									<div class="panel-body">
										<form v-if="user.level === 3" role="form" style="width: 300px">
											<input type="hidden" id="email" name="email" v-model="entity.email">

											<div class="form-group input-group">
												<span class="input-group-addon"><i
														class="fa fa-question-circle"></i></span>
												<input type="text" class="form-control" v-model="entity.title"
													placeholder="件名を入力してください" style="width: 100%;" />
											</div>
											<div class="form-group input-group">
												<span class="input-group-addon"><i class="fa fa-comment"></i></span>
												<input type="text" class="form-control" v-model="entity.content"
													placeholder="内容を入力してください" style="width: 100%; height: 150px;" />
											</div>
											<div style="text-align: center">
												<a href="javascript:void(0)" @click="send()"
													class="btn btn-primary">送信</a>
											</div>
										</form>

										<br />
										<!-- 插入横线 -->
										<!--<hr>-->
										<table v-if="user.level === 1"
											class="table table-striped table-bordered table-hover">

											<thead>
												<tr>
													<th style="width: 25%;">件名</th>
													<th style="width: 75%;">内容</th>
												</tr>
											</thead>
											<tbody v-for="obj in tableData2">
												<tr>
													<td>{{obj.title}}</td>
													<td>{{obj.content}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<!-- 引入Vue.js库 -->
						<script src="../js/vue2.6.11/vue.min.js"></script>
						<!-- 引入axios库，用于发送HTTP请求 -->
						<script src="../js/axios.js"></script>

						<!-- 创建Vue实例 -->
						<script>
							new Vue({
								el: '#wrapper', // 绑定到页面上的元素，这里使用了与您的HTML中相同的id
								data: {
									user: {}, // 存储用户信息
									entity: {
										email: '',
										title: '',
										content: ''
									}, // 存储表单数据
									tableData2: [] // 存储表格数据
								},
								created: function () {
									// 在Vue实例创建时执行的代码
									// 初始化用户信息，可以根据实际情况获取用户信息
									this.user = JSON.parse(localStorage.getItem('user'));
									// 加载表格数据
									this.loadTable();
								},
								methods: {
									loadTable: function () {
										// 发送请求获取表格数据
										let url = "/inquiryInfo";
										axios.get(url).then(res => {
											if (res.data.code === '0') {
												this.tableData2 = res.data.data;
											} else {
												// 处理错误，例如显示错误消息
												console.error('获取表格数据失败:', res.data.msg);
											}
										});
									},
									send: function () {
										// 发送表单数据
										axios.post("/send", this.entity).then(res => {
											if (res.data.code === '0') {
												// TODO: 处理成功后的逻辑，例如重定向或显示成功消息
												console.log('表单数据发送成功');
											} else {
												// 处理错误，例如显示错误消息
												console.error('表单数据发送失败:', res.data.msg);
											}
										});
									},
									logout: function () {
										// 处理注销操作，根据实际情况实现
									},
									personalPage: function () {
										// 跳转到个人信息页面，根据实际情况实现
									}
								}
							});
						</script>

</body>

</html>